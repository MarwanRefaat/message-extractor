# =============================================================================
# MESSAGE EXTRACTOR - ENVIRONMENT CONFIGURATION
# =============================================================================
# This file contains all environment variables for the message extractor project.
# Copy this file to .env and customize the values for your setup:
#   cp .env.example .env
# =============================================================================

# -----------------------------------------------------------------------------
# SUPABASE CONFIGURATION
# -----------------------------------------------------------------------------
# Supabase database connection string (PostgreSQL)
# Format: postgresql://postgres:[PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres
# Or use connection pooling: postgresql://postgres.[PROJECT-REF]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres
SUPABASE_CONNECTION=postgresql://postgres:YOUR_PASSWORD@db.YOUR_PROJECT_REF.supabase.co:5432/postgres

# Alternative: Supabase connection components (if not using full connection string)
SUPABASE_PROJECT_REF=
SUPABASE_PASSWORD=
SUPABASE_HOST=
SUPABASE_PORT=5432
SUPABASE_DATABASE=postgres

# -----------------------------------------------------------------------------
# GOOGLE OAUTH CONFIGURATION
# -----------------------------------------------------------------------------
# Path to Google OAuth2 credentials file (downloaded from Google Cloud Console)
# Default: credentials.json in project root
GOOGLE_CREDENTIALS_PATH=credentials.json

# Path to store Google OAuth token (auto-generated after first auth)
# Default: token.json in project root
GOOGLE_TOKEN_PATH=token.json

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------
# Local SQLite database path
# Default: data/database/chats.db
DATABASE_PATH=data/database/chats.db

# Supabase migration SQL file path
# Default: data/database/supabase_migration.sql
SUPABASE_MIGRATION_SQL=data/database/supabase_migration.sql

# -----------------------------------------------------------------------------
# DATA DIRECTORY PATHS
# -----------------------------------------------------------------------------
# Base output directory for all extracted data
# Default: ./data
DATA_OUTPUT_DIR=./data

# Raw data directory (platform-specific exports)
# Default: data/raw
RAW_DATA_DIR=data/raw

# Unified data directory (combined timeline)
# Default: data/unified
UNIFIED_DATA_DIR=data/unified

# Gmail export directory
# Default: gmail_export
GMAIL_EXPORT_DIR=gmail_export

# -----------------------------------------------------------------------------
# USER/CONTACT INFORMATION
# -----------------------------------------------------------------------------
# Your primary email addresses (used for filtering Gmail/Calendar events)
# Comma-separated list
USER_EMAILS=marwan@marwanrefaat.com,marwan@fractalfund.com

# Your phone number (normalized format, used for Calendar filtering)
# Format: +[country code][number], e.g., +14247774242
USER_PHONE=+14247774242

# Your name (optional, for contact identification)
USER_NAME=Marwan Refaat

# -----------------------------------------------------------------------------
# DATE FILTERING
# -----------------------------------------------------------------------------
# Start date for message extraction (ISO format: YYYY-MM-DD)
# Only messages from this date onwards will be extracted
FILTER_START_DATE=2024-01-01

# -----------------------------------------------------------------------------
# LLM CONFIGURATION (GPT4All / Local LLM)
# -----------------------------------------------------------------------------
# Enable LLM-based extraction (true/false)
# LLM is used for intelligent email/calendar event parsing
USE_LLM=true

# LLM model name (GPT4All model name)
# Options: gpt4all-j-v1.3-groovy, orca-mini-3b-gguf2-q4_0.gguf, etc.
# Default: gpt4all (will try fast models first)
LLM_MODEL_NAME=gpt4all

# LLM sampling temperature (0.0-1.0)
# Lower values = more deterministic (recommended: 0.0)
LLM_TEMPERATURE=0.0

# LLM device (cpu, gpu, cuda)
LLM_DEVICE=cpu

# LLM max tokens for generation
LLM_MAX_TOKENS=4096

# -----------------------------------------------------------------------------
# PLATFORM-SPECIFIC SETTINGS
# -----------------------------------------------------------------------------

# --- Gmail Settings ---
# Gmail API page size (max: 500)
GMAIL_API_PAGE_SIZE=500

# Gmail query filter (Gmail search query syntax)
# Default: after:2024/1/1
GMAIL_FILTER_QUERY=after:2024/1/1

# Gmail exporter binary path (if using gmail-exporter tool)
# Default: tools/gmail-exporter/gmail-exporter (auto-detected)
GMAIL_EXPORTER_PATH=

# --- Google Calendar Settings ---
# Google Calendar API page size (max: 2500)
GCAL_API_PAGE_SIZE=2500

# Google Calendar filter time minimum (ISO format with Z)
# Default: 2024-01-01T00:00:00Z
GCAL_FILTER_TIME_MIN=2024-01-01T00:00:00Z

# --- WhatsApp Settings ---
# WhatsApp database path (for import)
# Example: /path/to/msgstore.db
WHATSAPP_DB_PATH=

# WhatsApp backup type (android, ios)
WHATSAPP_BACKUP_TYPE=android

# --- iMessage Settings ---
# iMessage database path (macOS default)
# Default: ~/Library/Messages/chat.db (auto-detected)
IMESSAGE_DB_PATH=

# -----------------------------------------------------------------------------
# EXTRACTION LIMITS
# -----------------------------------------------------------------------------
# Maximum number of results to extract per platform
# Default: 10000
DEFAULT_MAX_RESULTS=10000

# Maximum number of email files to process
MAX_EMAIL_FILES=10000

# Maximum number of calendar events to process
MAX_CALENDAR_EVENTS=10000

# -----------------------------------------------------------------------------
# LOGGING AND DEBUGGING
# -----------------------------------------------------------------------------
# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Enable debug logging (true/false)
DEBUG=false

# Log file path (optional, logs to console if not set)
LOG_FILE=

# -----------------------------------------------------------------------------
# GO COMPILER (for gmail-exporter)
# -----------------------------------------------------------------------------
# Go binary path (for building gmail-exporter)
# Default: auto-detected from PATH or /opt/homebrew/bin/go (macOS)
GO_BINARY_PATH=

# -----------------------------------------------------------------------------
# VERCEL CONFIGURATION (if using Vercel integration)
# -----------------------------------------------------------------------------
# Vercel project name (if applicable)
VERCEL_PROJECT_NAME=message-extractor

# -----------------------------------------------------------------------------
# ADVANCED SETTINGS
# -----------------------------------------------------------------------------
# Enable progress bars during extraction (true/false)
SHOW_PROGRESS=true

# Enable validation during extraction (true/false)
VALIDATE_MESSAGES=true

# Enable sanitization of extracted data (true/false)
SANITIZE_DATA=true

# Batch mode (skip authentication prompts, use existing tokens)
BATCH_MODE=false

# Skip token saving (for testing)
NO_TOKEN_SAVE=false

# Connection timeout in seconds
CONNECTION_TIMEOUT=3600

# Request timeout in seconds
REQUEST_TIMEOUT=300

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
# Enable calendar event filtering (exclude generic holidays)
ENABLE_CALENDAR_FILTERING=true

# Enable email thread detection
ENABLE_EMAIL_THREADS=true

# Enable contact cross-linking (match contacts across platforms)
ENABLE_CONTACT_LINKING=true

# Enable duplicate message detection
ENABLE_DUPLICATE_DETECTION=true

# Enable full-text search indexing
ENABLE_FULLTEXT_SEARCH=true

# -----------------------------------------------------------------------------
# SECURITY & PRIVACY
# -----------------------------------------------------------------------------
# Encrypt sensitive data at rest (true/false)
# Note: Not currently implemented, placeholder for future feature
ENCRYPT_DATA=false

# Auto-delete raw exports after processing (true/false)
# WARNING: This will delete raw data files after extraction
AUTO_DELETE_RAW_DATA=false

# -----------------------------------------------------------------------------
# NOTES
# -----------------------------------------------------------------------------
# 1. Never commit this file with real credentials to version control
# 2. Create a .env file by copying this: cp .env.example .env
# 3. Use environment variables or .env file for configuration
# 4. Paths can be absolute or relative to project root
# 5. Boolean values: true/false, yes/no, 1/0 (case-insensitive)
# 6. Comma-separated lists for multiple values (e.g., USER_EMAILS)
# 7. Empty values use defaults defined in constants.py or extractor classes
# 8. Load .env file using python-dotenv: from dotenv import load_dotenv; load_dotenv()
